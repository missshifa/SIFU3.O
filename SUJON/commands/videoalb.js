const axios = require("axios"); module.exports.config = { name: "album", version: "1.0.0", hasPermission: 0, credits: "Shaon Ã— Ullash (modded)", description: "Send a video from specific category via album API", commandCategory: "media", usages: "", cooldowns: 5 }; module.exports.run = async function({ event, api }) { const menu = ` â•­â”€â”€â”€ ğŸ¥ ğ™°ğ™»ğ™±ğš„ğ™¼ ğš…ğ™¸ğ™³ğ™´ğ™¾ â”€â”€â”€â•® 1ï¸âƒ£ Islamic 2ï¸âƒ£ Anime 3ï¸âƒ£ Shairi 4ï¸âƒ£ Short 5ï¸âƒ£ Sad 6ï¸âƒ£ Status 7ï¸âƒ£ Football 8ï¸âƒ£ Funny 9ï¸âƒ£ Love ğŸ”Ÿ CPL 1ï¸âƒ£1ï¸âƒ£ Baby 1ï¸âƒ£2ï¸âƒ£ Free Fire 1ï¸âƒ£3ï¸âƒ£ Lofi 1ï¸âƒ£4ï¸âƒ£ Happy 1ï¸âƒ£5ï¸âƒ£ Humayun Sir ğŸ” Reply a number to get video. `; return api.sendMessage(menu, event.threadID, (err, info) => { global.client.handleReply.push({ name: module.exports.config.name, messageID: info.messageID, author: event.senderID, type: "choose" }); }, event.messageID); }; module.exports.handleReply = async function({ api, event, handleReply }) { if (event.senderID !== handleReply.author) return; const categories = { "1": "islamic", "2": "anime", "3": "shairi", "4": "short", "5": "sad", "6": "status", "7": "football", "8": "funny", "9": "love", "10": "cpl", "11": "baby", "12": "ff", "13": "lofi", "14": "happy", "15": "humayun" }; const choice = event.body.trim(); const selectedCategory = categories[choice]; if (!selectedCategory) { return api.sendMessage("ğŸ˜’Invalid choice. Please reply with a number from the menu.", event.threadID, event.messageID); } try { const apiUrl = `http://194.164.125.5:6190/album?type=${selectedCategory}`; const response = await axios.get(apiUrl); const videoUrl = response.data.data; if (!videoUrl) throw new Error("No video returned"); const videoStream = (await axios.get(videoUrl, { responseType: "stream" })).data; return api.sendMessage({ body: `âœ¨ Here's your ${selectedCategory} video ğŸ¥`, attachment: videoStream }, event.threadID, event.messageID); } catch (err) { console.error("Video fetch error:", err.message); return api.sendMessage("âŒ Failed to fetch video. Try again later.", event.threadID, event.messageID); } };
